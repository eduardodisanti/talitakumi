<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="analisislaboratorio"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Portrait"
		 pageWidth="595"
		 pageHeight="842"
		 columnWidth="535"
		 columnSpacing="0"
		 leftMargin="30"
		 rightMargin="30"
		 topMargin="20"
		 bottomMargin="20"
		 whenNoDataType="NoPages"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />

	<parameter name="episodiodesde" isForPrompting="true" class="java.lang.Integer"/>
	<parameter name="episodiohasta" isForPrompting="true" class="java.lang.Integer"/>
	<queryString><![CDATA[select analisis.id, analisis.valorrefminimo, analisis.valorrefmaximo, estudios.id as estid,
       estudios.descripcion as estdesc, analisis.descripcion as anadesc, 
       valorhallado, tiporesultado, documento, analisis.unidades, episodios.fecha,
       personas.apellidos, personas.nombres, episodios.id as epiid
from estudios, estudioshechos, analisishechos, analisis, personas, episodios
where episodio>=$P{episodiodesde} and 
      episodio <=$P{episodiohasta} and 
      estudios.id = estudioshechos.estudio and 
      analisishechos.estudiohecho = estudioshechos.id and 
      analisishechos.analisis = analisis.id and
      episodios.paciente = personas.id and
      episodio = episodios.id and 
      analisishechos.valorhallado != ''
      group by personas.id, analisis.id
order by personas.apellidos, personas.nombres, estid, analisis.id]]></queryString>

	<field name="id" class="java.lang.Integer"/>
	<field name="valorrefminimo" class="java.lang.String"/>
	<field name="valorrefmaximo" class="java.lang.String"/>
	<field name="estid" class="java.lang.Integer"/>
	<field name="estdesc" class="java.lang.String"/>
	<field name="anadesc" class="java.lang.String"/>
	<field name="valorhallado" class="java.lang.String"/>
	<field name="tiporesultado" class="java.lang.String"/>
	<field name="documento" class="java.lang.Integer"/>
	<field name="unidades" class="java.lang.String"/>
	<field name="fecha" class="java.sql.Date"/>
	<field name="apellidos" class="java.lang.String"/>
	<field name="nombres" class="java.lang.String"/>
	<field name="epiid" class="java.lang.Integer"/>


		<group  name="PERSONA" isStartNewPage="true" >
			<groupExpression><![CDATA[($F{documento})]]></groupExpression>
			<groupHeader>
			<band height="124"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="270"
						y="0"
						width="85"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font fontName="SansSerif" size="7"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{apellidos}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="355"
						y="0"
						width="49"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font fontName="SansSerif" size="7"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{nombres}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="280"
						y="50"
						width="100"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.Integer"><![CDATA[$F{documento}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="473"
						y="51"
						width="57"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.Integer"><![CDATA[$F{epiid}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="dd/MM/yyyy" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="442"
						y="-1"
						width="66"
						height="17"
						key="textField"/>
					<box></box>
					<textElement>
						<font size="8"/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[$F{fecha}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						mode="Opaque"
						x="142"
						y="84"
						width="210"
						height="20"
						key="staticText-7"/>
					<box></box>
					<textElement>
						<font size="14"/>
					</textElement>
				<text><![CDATA[ANALISIS DE LABORATORIO]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="0"
						y="108"
						width="200"
						height="16"
						key="staticText-8"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<text><![CDATA[EXAMEN]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="200"
						y="108"
						width="137"
						height="15"
						key="staticText-9"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<text><![CDATA[VALOR HALLADO]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="340"
						y="108"
						width="190"
						height="14"
						key="staticText-10"/>
					<box></box>
					<textElement textAlignment="Center">
						<font/>
					</textElement>
				<text><![CDATA[VALOR DE REFERENCIA]]></text>
				</staticText>
			</band>
			</groupHeader>
			<groupFooter>
			<band height="1"  isSplitAllowed="true" >
			</band>
			</groupFooter>
		</group>
		<group  name="ESTUDIO" >
			<groupExpression><![CDATA[($F{estdesc})]]></groupExpression>
			<groupHeader>
			<band height="20"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="0"
						width="190"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{estdesc}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="0"
						width="530"
						height="0"
						key="line-1"/>
					<graphicElement stretchType="NoStretch"/>
				</line>
			</band>
			</groupHeader>
			<groupFooter>
			<band height="0"  isSplitAllowed="true" >
			</band>
			</groupFooter>
		</group>
		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</title>
		<pageHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</pageHeader>
		<columnHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnHeader>
		<detail>
			<band height="21"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="30"
						y="0"
						width="158"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{anadesc}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="188"
						y="0"
						width="126"
						height="18"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Center">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{valorhallado}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="319"
						y="0"
						width="83"
						height="18"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Right">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{valorrefminimo}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="420"
						y="0"
						width="60"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{valorrefmaximo}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="480"
						y="0"
						width="50"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{unidades}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="400"
						y="0"
						width="20"
						height="20"
						key="staticText-6"/>
					<box></box>
					<textElement textAlignment="Center">
						<font/>
					</textElement>
				<text><![CDATA[-]]></text>
				</staticText>
			</band>
		</detail>
		<columnFooter>
			<band height="22"  isSplitAllowed="true" >
				<staticText>
					<reportElement
						mode="Opaque"
						x="368"
						y="8"
						width="166"
						height="14"
						key="staticText-5"/>
					<box></box>
					<textElement verticalAlignment="Bottom">
						<font/>
					</textElement>
				<text><![CDATA[Validado por Dra. Silvia Pigni]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="27"
						y="3"
						width="100"
						height="18"
						key="textField"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.Integer"><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="4"
						y="4"
						width="19"
						height="17"
						key="staticText-11"/>
					<box></box>
					<textElement>
						<font/>
					</textElement>
				<text><![CDATA[#]]></text>
				</staticText>
			</band>
		</columnFooter>
		<pageFooter>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</pageFooter>
		<summary>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</summary>
</jasperReport>
